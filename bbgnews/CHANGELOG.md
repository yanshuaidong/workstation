# 更新日志

## v1.2.0 - 2025-11-26

### ✨ 新增功能

#### 🚀 立即执行
- 点击启动定时任务后立即执行第一次爬虫任务，无需等待

#### 📊 执行记录
- 新增任务执行记录表格，显示每次执行的时间和状态
- 自动记录成功/失败状态
- 最新记录显示在最上方
- 最多保留100条历史记录
- 支持清空所有记录

### 🎨 UI优化

#### 界面重构
- 全新的渐变色设计，提升视觉体验
- 优化布局结构，更加清晰易用
- 标题：Bloomberg News API 拦截器
- 定时任务管理面板：状态、按钮、时间信息
- 执行记录表格面板：次数、时间、状态

#### 交互优化
- 简化状态提示，使用原生alert替代
- 移除不必要的"刷新页面"和"清除数据"按钮
- 执行记录实时更新
- 清空记录功能带二次确认

### 📝 文档更新
- 整合文档到README.md，删除单独的定时任务使用说明
- 精简说明文档，更加简洁明了

### 📦 修改的文件
- `popup.html` - UI全面重构
- `popup.js` - 添加记录管理功能
- `background.js` - 实现立即执行和记录保存
- `README.md` - 更新功能说明
- 删除 `定时任务使用说明.md`

---

## v1.1.0 - 2025-11-26

### ✨ 新增功能

#### ⏰ 定时任务功能
- 新增自动定时刷新页面功能，实现无人值守的数据采集
- 支持自定义刷新间隔（1-1440分钟）
- 定时任务状态实时监控
- Chrome重启后自动恢复定时任务
- 智能标签页管理（自动复用或创建Bloomberg标签页）

### 🔧 功能改进

#### UI增强
- 在Popup界面添加定时任务控制面板
- 实时显示任务状态、启动时间、上次执行时间、下次执行时间
- 新增启动/停止定时任务按钮
- 添加时间间隔输入框，支持自定义设置

#### 后台服务增强
- background.js 新增定时任务管理逻辑
- 使用 Chrome Alarms API 实现可靠的定时器
- 新增消息处理机制（START_SCHEDULER、STOP_SCHEDULER、GET_SCHEDULER_STATUS）
- 添加定时任务状态持久化

### 📝 文档更新
- 更新 README.md，添加定时任务功能说明
- 新增《定时任务使用说明.md》详细文档
- 新增 CHANGELOG.md 记录版本变化

### 🔒 权限变更
- manifest.json 新增 "alarms" 权限（用于定时任务）
- manifest.json 新增 "tabs" 权限（用于标签页管理）

### 📦 修改的文件
- `manifest.json` - 添加权限
- `background.js` - 新增定时任务核心逻辑
- `popup.html` - 添加定时任务控制UI
- `popup.js` - 实现定时任务控制逻辑
- `README.md` - 更新功能说明

### 🎯 技术亮点
- 使用 Chrome Alarms API 替代 setInterval，更稳定可靠
- 支持后台运行，即使关闭Popup窗口任务仍继续
- 状态自动恢复机制，Chrome重启后无需重新设置
- 智能标签页管理，优化资源使用

---

## v1.0.2 - 之前版本

### 基础功能
- 拦截Bloomberg API请求
- 双世界架构（MAIN + ISOLATED）
- 数据发送到本地Python服务器
- Popup界面显示拦截数据
- 手动刷新页面功能

