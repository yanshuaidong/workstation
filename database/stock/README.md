

A股量化数据库

基于 AKShare 构建的本地 SQLite 股票数据仓库

---

## 📋 概览


### 📈 数据规模

| 指标 | 数值 |
|:----:|:----:|
| 📅 时间跨度 | 2018年1月 ~ 2025年12月 |
| 🏢 股票数量 | **5,458** 只 |
| 📝 总记录数 | **~900万** 条 |
| 💾 数据大小 | ~1 GB |

> ⚠️ **注意**: 数据库文件 `stock.db` 不在 Git 版本控制中

---

## 🗄️ 数据库设计

```
📁 database/
└── 📄 stock.db          # SQLite 数据库文件
```

### 📊 表结构概览

```
┌─────────────────────────────────────────────────────────────┐
│                        stock.db                             │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ stock_main  │    │ hist_000001 │    │ hist_000002 │ ... │
│  │  (主表)     │    │  (历史表)   │    │  (历史表)   │     │
│  └─────────────┘    └─────────────┘    └─────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

| 表名 | 说明 | 记录特点 |
|:-----|:-----|:---------|
| `stock_main` | 股票主表 | 每个股票一条记录（约 5,000+） |
| `hist_{symbol}` | 股票历史行情表 | 每个交易日一条记录 |

---

### 📌 `stock_main` 表结构

> 存储所有股票的基础信息

| 字段名 | 类型 | 说明 | 示例 |
|:------:|:----:|:-----|:-----|
| `symbol` | TEXT | 🔑 股票代码（主键） | `000681` |
| `name` | TEXT | 股票名称 | `视觉中国` |
| `market` | TEXT | 市场标识 | `SH` / `SZ` / `BJ` |
| `created_at` | TEXT | 记录创建时间 | `2024-01-01 10:00:00` |
| `updated_at` | TEXT | 记录更新时间 | `2024-12-18 15:30:00` |

---

### 📈 `hist_{symbol}` 表结构

> 以 `hist_000001` 为例，存储平安银行的历史行情数据

| 字段名 | 类型 | 说明 | 示例 |
|:------:|:----:|:-----|:-----|
| `date` | TEXT | 🔑 交易日期（主键） | `2024-12-18` |
| `open` | REAL | 开盘价 | `10.52` |
| `high` | REAL | 最高价 | `10.68` |
| `low` | REAL | 最低价 | `10.45` |
| `close` | REAL | 收盘价 | `10.60` |
| `volume` | INTEGER | 成交量 | `123456789` |
| `amount` | REAL | 成交额 | `1234567890.00` |
| `amplitude` | REAL | 振幅 (%) | `2.18` |
| `pct_change` | REAL | 涨跌幅 (%) | `1.05` |
| `change` | REAL | 涨跌额 | `0.11` |
| `turnover` | REAL | 换手率 (%) | `0.64` |

---

## ⚙️ `updata.py` 脚本功能

数据更新脚本，自动处理以下场景：

| 操作 | 场景 | 处理方式 |
|:----:|:-----|:---------|
| 🆕 | **新上市股票** | 添加到 `stock_main`，创建 `hist_{symbol}` 表并获取历史数据 |
| ❌ | **退市股票** | 从 `stock_main` 删除记录，同时删除 `hist_{symbol}` 表 |
| ✏️ | **股票改名** | 更新 `stock_main` 中的名称字段 |
| 📈 | **数据更新** | 将现有股票的历史数据增量更新到最新日期 |

---