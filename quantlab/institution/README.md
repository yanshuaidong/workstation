# æœºæ„æŒä»“é‡åŒ–ç­–ç•¥

> èåˆæ¨¡å‹ï¼šè¶‹åŠ¿MLæŠ€æœ¯ç‰¹å¾ + å›½æ³°å›å®‰æŒä»“ç‰¹å¾

## ç­–ç•¥æ¦‚è¿°

æœ¬ç­–ç•¥ç»“åˆäº†ä¸¤å¥—ç‰¹å¾ä½“ç³»ï¼š
1. **è¶‹åŠ¿MLæŠ€æœ¯ç‰¹å¾**ï¼šä»·æ ¼åŠ¨é‡ã€å‡çº¿ç³»ç»Ÿã€æ³¢åŠ¨ç‡ã€çªç ´ä¿¡å·ç­‰ 50+ ä¸ªæŠ€æœ¯æŒ‡æ ‡
2. **å›½æ³°å›å®‰æŒä»“ç‰¹å¾**ï¼šå‡€æŒä»“æ–¹å‘ã€ä¸»åŠ¨è¿›æ”»ä¿¡å·ã€è¿›æ”»å¼ºåº¦ã€æŒç»­æ€§ç­‰æœºæ„è¡Œä¸ºæŒ‡æ ‡

æ ¸å¿ƒé€»è¾‘ï¼š**æŠ€æœ¯é¢ç¡®è®¤è¶‹åŠ¿ + æœºæ„èµ„é‡‘éªŒè¯æ–¹å‘ = é«˜è´¨é‡äº¤æ˜“ä¿¡å·**

## æ–‡ä»¶ç»“æ„

```
quantlab/institution/
â”œâ”€â”€ train.py          # æ¨¡å‹è®­ç»ƒè„šæœ¬
â”œâ”€â”€ predict.py        # æ¯æ—¥é¢„æµ‹è„šæœ¬
â”œâ”€â”€ README.md         # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ models/           # æ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ long_model.pkl    # å¤šå¤´æ¨¡å‹
â”‚   â”œâ”€â”€ short_model.pkl   # ç©ºå¤´æ¨¡å‹
â”‚   â””â”€â”€ config.json       # æ¨¡å‹é…ç½®
â””â”€â”€ output/           # è¾“å‡ºç›®å½•
    â””â”€â”€ backtest_result.png  # å›æµ‹ç»“æœå›¾
```

## æ•°æ®ä¾èµ–

ç­–ç•¥ä¾èµ–ä»¥ä¸‹ä¸¤ä¸ªæ•°æ®åº“ï¼Œéœ€è¦ä¿æŒæ›´æ–°ï¼š

| æ•°æ®åº“ | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| æœŸè´§æ•°æ®åº“ | `database/futures/futures.db` | ä¸»åŠ›åˆçº¦æ—¥çº¿æ•°æ® |
| æŒä»“æ•°æ®åº“ | `database/institution/institution.db` | å›½æ³°å›å®‰æŒä»“æ•°æ® |

æ˜ å°„å…³ç³»é…ç½®ï¼š`database/institution/mapping.json`

## ä½¿ç”¨æ–¹æ³•

### 1. è®­ç»ƒæ¨¡å‹

```bash
# æ¿€è¿›æ¨¡å¼ï¼ˆå°èµ„é‡‘ 5ä¸‡ä»¥ä¸‹ï¼Œé›†ä¸­é‡ä»“ï¼‰
python train.py aggressive

# ç¨³å¥æ¨¡å¼ï¼ˆå¤§èµ„é‡‘ 50ä¸‡ä»¥ä¸Šï¼Œåˆ†æ•£æŒä»“ï¼‰
python train.py conservative
```

**æ¿€è¿›æ¨¡å¼ vs ç¨³å¥æ¨¡å¼**

| å‚æ•° | æ¿€è¿›æ¨¡å¼ | ç¨³å¥æ¨¡å¼ |
|------|----------|----------|
| ä¿¡å·é˜ˆå€¼ | Top 3% | Top 10% |
| æœ€å¤§æŒä»“ | 1 ä¸ª | 5 ä¸ª |
| å•ç¬”ä»“ä½ | 80% | 20% |
| æ­¢æŸ/æ­¢ç›ˆ | 2.5%/8% | 2%/5% |
| è¦æ±‚å›½æ³°è¿›æ”» | æ˜¯ | å¦ |

### 2. æ¯æ—¥é¢„æµ‹

```bash
# æ˜¾ç¤ºä»Šæ—¥ä¿¡å·ï¼ˆé»˜è®¤å‰10ä¸ªï¼‰
python predict.py

# æ˜¾ç¤ºå‰5ä¸ªä¿¡å·
python predict.py --top 5

# è¾“å‡ºJSONæ ¼å¼ï¼ˆç”¨äºç¨‹åºåŒ–æ¥å…¥ï¼‰
python predict.py --json
```

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
============================================================
ğŸ“ˆ ä»Šæ—¥æ¨èä¿¡å·
============================================================

1. ç”²é†‡ ğŸ”´ åšå¤š
   æ¦‚ç‡: 87.3% | æ”¶ç›˜ä»·: 2456.00
   âœ“ å›½æ³°è¿›æ”» | è¿ç»­3å¤© | âœ“ å‡çº¿å¤šæ’

2. èºçº¹é’¢ ğŸ”µ åšç©º
   æ¦‚ç‡: 82.1% | æ”¶ç›˜ä»·: 3520.00
   âœ“ å›½æ³°è¿›æ”» | è¿ç»­2å¤©
```

## ç‰¹å¾ä½“ç³»

### æŠ€æœ¯ç‰¹å¾ï¼ˆ52ä¸ªï¼‰

| ç±»åˆ« | ç‰¹å¾ | è¯´æ˜ |
|------|------|------|
| ä»·æ ¼åŠ¨é‡ | `feat_ret_3/5/10/20` | å¤šå‘¨æœŸæ”¶ç›Šç‡ |
| çªç ´ä¿¡å· | `feat_break_high/low_10/20/40` | å¤šå‘¨æœŸçªç ´ |
| å‡çº¿ç³»ç»Ÿ | `feat_ma_align_bull/bear` | å‡çº¿å¤šå¤´/ç©ºå¤´æ’åˆ— |
| æ³¢åŠ¨ç‡ | `feat_vol_5/10/20`, `feat_atr_ratio` | æ³¢åŠ¨ç‡æŒ‡æ ‡ |
| è¶‹åŠ¿å¼ºåº¦ | `feat_trend_slope/r2_10/20` | çº¿æ€§å›å½’è¶‹åŠ¿ |
| æˆäº¤é‡ | `feat_vol_ratio_5/20`, `feat_vol_breakout` | é‡èƒ½ç‰¹å¾ |
| Kçº¿å½¢æ€ | `feat_body_ratio`, `feat_consec_up/down` | Kçº¿å½¢æ€ |
| RSI/BB | `feat_rsi_14`, `feat_bb_pos` | æŠ€æœ¯æŒ‡æ ‡ |

### å›½æ³°æŒä»“ç‰¹å¾ï¼ˆ15ä¸ªï¼‰

| ç‰¹å¾ | è¯´æ˜ | æ ¸å¿ƒé€»è¾‘ |
|------|------|----------|
| `feat_gtja_long_attack` | å¤šå¤´è¿›æ”»ä¿¡å· | å‡€å¤šå¤´ + å‡€å¢ä»“>0 |
| `feat_gtja_short_attack` | ç©ºå¤´è¿›æ”»ä¿¡å· | å‡€ç©ºå¤´ + å‡€å¢ä»“<0 |
| `feat_gtja_long_intensity` | å¤šå¤´è¿›æ”»å¼ºåº¦ | å‡€å¢ä»“ / æ˜¨æ—¥å‡€æŒä»“ |
| `feat_gtja_long_streak` | è¿ç»­å¤šå¤´è¿›æ”»å¤©æ•° | æŒç»­æ€§åˆ¤æ–­ |
| `feat_gtja_long_with_ma` | å¤šå¤´è¿›æ”» Ã— å‡çº¿å¤šæ’ | å…±æŒ¯ä¿¡å· |
| `feat_gtja_long_with_break` | å¤šå¤´è¿›æ”» Ã— çªç ´é«˜ç‚¹ | å…±æŒ¯ä¿¡å· |

## äº¤æ˜“è§„åˆ™

### å¼€ä»“æ¡ä»¶
1. æ¨¡å‹é¢„æµ‹æ¦‚ç‡ â‰¥ é˜ˆå€¼ï¼ˆTop 3% æˆ– Top 10%ï¼‰
2. æ¿€è¿›æ¨¡å¼é¢å¤–è¦æ±‚ï¼šå›½æ³°è¿›æ”»ä¿¡å·ç¡®è®¤

### å¹³ä»“æ¡ä»¶
| æ¡ä»¶ | å¤šå¤´ | ç©ºå¤´ |
|------|------|------|
| æ­¢ç›ˆ | ç›ˆåˆ©è¾¾ç›®æ ‡ | ç›ˆåˆ©è¾¾ç›®æ ‡ |
| æ­¢æŸ | äºæŸè¾¾é˜ˆå€¼ | äºæŸè¾¾é˜ˆå€¼ |
| ç§»åŠ¨æ­¢æŸ | å›æ’¤ 1.5%~2% | åå¼¹ 1.5%~2% |
| æœ€å¤§æŒä»“å¤©æ•° | 10~15 å¤© | 10~15 å¤© |

## æ¨¡å‹æ€§èƒ½

è®­ç»ƒæ—¶é—´èŒƒå›´ï¼š2022-01-01 ~ 2023-12-31  
éªŒè¯é›†ï¼š2024-01-01 ~ 2024-06-30  
æµ‹è¯•é›†ï¼š2024-07-01 è‡³ä»Š

å…³é”®æŒ‡æ ‡ï¼ˆå‚è€ƒï¼‰ï¼š
- éªŒè¯é›† AUCï¼š0.65+
- æµ‹è¯•é›†èƒœç‡ï¼š55%+
- å¹´åŒ–æ”¶ç›Šï¼š20%+ï¼ˆæ¿€è¿›æ¨¡å¼ï¼‰
- æœ€å¤§å›æ’¤ï¼š15% ä»¥å†…

## æ—¥å¸¸å·¥ä½œæµ

```
æ¯æ—¥æ”¶ç›˜åï¼š

1. æ›´æ–°æ•°æ®åº“
   - è¿è¡ŒæœŸè´§æ•°æ®æ›´æ–°è„šæœ¬
   - è¿è¡Œæœºæ„æŒä»“æ›´æ–°è„šæœ¬

2. è¿è¡Œé¢„æµ‹
   python predict.py

3. å®¡æ ¸ä¿¡å·
   - æ£€æŸ¥æ¨èå“ç§åŸºæœ¬é¢
   - ç¡®è®¤æ— é‡å¤§äº‹ä»¶é£é™©

4. æ‰§è¡Œäº¤æ˜“ï¼ˆæ¬¡æ—¥å¼€ç›˜ï¼‰
```

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®æ›´æ–°**ï¼šé¢„æµ‹å‰åŠ¡å¿…ç¡®ä¿æ•°æ®åº“å·²æ›´æ–°åˆ°æœ€æ–°æ—¥æœŸ
2. **æ¨¡å‹é‡è®­**ï¼šå»ºè®®æ¯å­£åº¦é‡æ–°è®­ç»ƒä¸€æ¬¡æ¨¡å‹
3. **é£é™©æ§åˆ¶**ï¼šä¸¥æ ¼æ‰§è¡Œæ­¢æŸï¼Œå•å“ç§ä»“ä½ä¸è¶…è¿‡è®¾å®šæ¯”ä¾‹
4. **å¸‚åœºé€‚åº”æ€§**ï¼šæç«¯è¡Œæƒ…ï¼ˆæ¶¨è·Œåœã€èŠ‚å‡æ—¥ï¼‰ä¿¡å·éœ€äººå·¥å®¡æ ¸

## æ›´æ–°æ—¥å¿—

### 2024-12
- âœ… å®Œæˆèåˆæ¨¡å‹è®­ç»ƒå‚æ•°è°ƒä¼˜
- âœ… æ•´ç†æ–‡ä»¶ç»“æ„ï¼Œæ­£å¼åŒ–å‘½å
- âœ… ç¼–å†™æ¯æ—¥é¢„æµ‹è„šæœ¬

