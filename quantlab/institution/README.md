

数据存储在：database/institution/institution.db 下
`institution.db` SQLite 数据库的表结构设计。



从API获取的原始数据，结构为：
```
{
  "code": 0,                       // 响应码，0表示成功
  "msg": "",                       // 响应消息
  "data": {
    "date": "2025-12-18",          // 数据日期
    "broker": "国泰君安",          // 期货公司名称
    "positions": {
      "生猪": [                    // 品种名称作为key，value是该品种的所有合约列表
        {
          "code": "lh2605",        // 合约代码（如：lh2605表示生猪2026年5月合约）
          "buy": 3329,             // 多头持仓数量（手）
          "ss": 7295,              // 空头持仓数量（手）
          "buy_chge": 12,          // 多头持仓变化量：正数表示增仓，负数表示减仓
          "ss_chge": 107,          // 空头持仓变化量：正数表示增仓，负数表示减仓
          "name": "生猪",          // 品种名称
          "family": "农副"         // 品种族分类（如：农副、谷物、原油等）
        },
        // ... 更多合约
      ],
      "苹果": [...],
      // ... 更多品种
    }
  }
}
```




**每个品种一个表，表名 = 品种名称**

例如：
- `生猪` 表：存储生猪品种的每日持仓数据
- `苹果` 表：存储苹果品种的每日持仓数据
- `淀粉` 表：存储淀粉品种的每日持仓数据
- ...（共约80个品种，80个表）

**每个表的结构**：交易日期 + 4个核心字段（总多头、总空头、总多头变化、总空头变化）

---

## 数据库表结构设计

### 品种持仓表（每个品种一个表）

**表名规则**：直接使用品种名称作为表名，例如 `生猪`、`苹果`、`淀粉` 等

**表结构**（所有品种表结构相同）：

| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| `trade_date` | TEXT | PRIMARY KEY | 交易日期 (YYYY-MM-DD) |
| `total_buy` | INTEGER | NOT NULL | 总多头持仓（该品种所有合约的多头持仓之和） |
| `total_ss` | INTEGER | NOT NULL | 总空头持仓（该品种所有合约的空头持仓之和） |
| `total_buy_chge` | INTEGER | NOT NULL | 总多头变化（该品种所有合约的多头持仓变化之和） |
| `total_ss_chge` | INTEGER | NOT NULL | 总空头变化（该品种所有合约的空头持仓变化之和） |
| `created_at` | TEXT | - | 数据创建时间 |
| `updated_at` | TEXT | - | 数据更新时间 |

**示例表**：`生猪` 表

| trade_date | total_buy | total_ss | total_buy_chge | total_ss_chge | created_at | updated_at |
|------------|-----------|----------|----------------|---------------|------------|-------------|
| 2025-12-18 | 20543 | 35088 | -623 | 37 | 2025-12-19 10:00:00 | 2025-12-19 10:00:00 |
| 2025-12-19 | 21000 | 35200 | 457 | 112 | 2025-12-20 10:00:00 | 2025-12-20 10:00:00 |
| ... | ... | ... | ... | ... | ... | ... |
