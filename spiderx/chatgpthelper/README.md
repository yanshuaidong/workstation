# ğŸ’¬ ChatGPT Helper - AIæ·±åº¦åˆ†æç³»ç»Ÿ

> **ç³»ç»Ÿå®šä½**: AIæ·±åº¦åˆ†ææ¨¡å—ï¼Œæ˜¯ã€Œæ–°é—»è‡ªåŠ¨åŒ–å¤„ç†æµæ°´çº¿ã€çš„**ä¸‹æ¸¸**ç»„ä»¶

## ğŸ”— ç³»ç»Ÿå…³è”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ–°é—»è‡ªåŠ¨åŒ–å¤„ç†æµæ°´çº¿                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚  BBGNews     â”‚      â”‚     DB       â”‚      â”‚ ChatGPTHelperâ”‚             â”‚
â”‚   â”‚   é‡‡é›†ç«¯     â”‚ â”€â”€â”€â–º â”‚  å…±äº«æ•°æ®åº“   â”‚ â”€â”€â”€â–º â”‚  (æœ¬ç³»ç»Ÿ)    â”‚             â”‚
â”‚   â”‚  ç«¯å£:1123   â”‚      â”‚  crawler.db  â”‚      â”‚  ç«¯å£:1126   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                      â”‚                      â”‚                     â”‚
â”‚         â–¼                      â–¼                      â–¼                     â”‚
â”‚    é‡‡é›†+AIç­›é€‰           æ•°æ®ä¸­è½¬ç«™             ChatGPTæ·±åº¦åˆ†æ              â”‚
â”‚   (æ¯å¤©4æ¬¡)           analysis_task          (æ¯å¤©6æ¬¡)                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åä½œå…³ç³»**ï¼š
1. **BBGNews** é‡‡é›†æ–°é—» â†’ AIç­›é€‰ â†’ å†™å…¥ `analysis_task` è¡¨ï¼ˆis_analyzed=0ï¼‰
2. **ChatGPTHelper** è¯»å–å¾…åˆ†æä»»åŠ¡ â†’ è°ƒç”¨ChatGPT AI â†’ æ›´æ–°åˆ†æç»“æœï¼ˆis_analyzed=1ï¼‰

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

| ç»„ä»¶ | åŠŸèƒ½ | æ‰§è¡Œé¢‘ç‡ |
|------|------|----------|
| Chromeæ’ä»¶ | å®šæ—¶è§¦å‘ã€æ“ä½œChatGPTé¡µé¢ã€è·å–AIå“åº” | æ¯å¤©6æ¬¡ï¼ˆ4/8/12/16/20/24ç‚¹ï¼‰ |
| PythonæœåŠ¡ | æä¾›ä»»åŠ¡æŸ¥è¯¢ã€ä¿å­˜åˆ†æç»“æœã€åŒå†™æ•°æ®åº“ | æŒ‰éœ€å“åº” |

## ğŸ“Š æ•°æ®æµè½¬

```
analysis_task è¡¨ (is_analyzed=0)
    â†“ GET /get-tasks
PythonæœåŠ¡ (ç«¯å£1126) è¿”å›ä»»åŠ¡åˆ—è¡¨
    â†“
Chromeæ’ä»¶æ¥æ”¶ä»»åŠ¡
    â†“ æ‰“å¼€ChatGPTé¡µé¢
    â†“ é€ä¸ªæ‰§è¡Œä»»åŠ¡ï¼ˆå¡«å…¥promptã€è·å–å“åº”ï¼‰
    â†“ POST /save-result (æºå¸¦task_id)
PythonæœåŠ¡åŒå†™æ•°æ®åº“
    â”œâ”€â–º MySQL: news_red_telegraph (ai_analysiså­—æ®µ)
    â””â”€â–º SQLite: analysis_task (is_analyzed=1, ai_result=å†…å®¹)
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å‰ç½®æ¡ä»¶
- Python 3.7+
- Chromeæµè§ˆå™¨
- å·²åˆå§‹åŒ–æ•°æ®åº“ï¼ˆè¿è¡Œ `spiderx/db/init_db.py`ï¼‰
- BBGNewsæœåŠ¡å·²äº§ç”Ÿå¾…åˆ†æä»»åŠ¡

### å¯åŠ¨æ­¥éª¤

```bash
# 1. ç¡®ä¿æ•°æ®åº“å·²åˆå§‹åŒ–
cd spiderx/db && python init_db.py

# 2. å®‰è£…ä¾èµ–
cd spiderx/chatgpthelper && pip install -r requirements.txt

# 3. å¯åŠ¨PythonæœåŠ¡
# Linux/Mac
./start_server.sh

# Windows
python main.py

# 4. å®‰è£…Chromeæ’ä»¶
# chrome://extensions/ â†’ å¼€å‘è€…æ¨¡å¼ â†’ åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº â†’ é€‰æ‹© chatgpthelper ç›®å½•

# 5. ç™»å½• ChatGPT
# ç¡®ä¿å·²ç™»å½• https://chatgpt.com
```

## ğŸ“‹ APIæ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/get-tasks` | GET | è·å–å¾…åˆ†æä»»åŠ¡ï¼ˆis_analyzed=0ï¼‰ |
| `/save-result` | POST | ä¿å­˜ChatGPTåˆ†æç»“æœ |
| `/health` | GET | å¥åº·æ£€æŸ¥ |

### è·å–ä»»åŠ¡ç¤ºä¾‹
```bash
curl http://localhost:1126/get-tasks
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "success": true,
  "count": 2,
  "tasks": [
    {
      "id": 1,
      "title": "ã€å½­åšç¤¾2025å¹´12æœˆ06æ—¥0ç‚¹åˆ°6ç‚¹æ–°é—»ã€‘",
      "prompt": "AIç­›é€‰ç»“æœ + åˆ†ææŒ‡ä»¤...",
      "news_time": "2025-12-06 00:00:00",
      "created_at": "2025-12-06 06:00:00"
    }
  ]
}
```

### ä¿å­˜ç»“æœç¤ºä¾‹
```bash
curl -X POST http://localhost:1126/save-result \
  -H "Content-Type: application/json" \
  -d '{"title": "åˆ†ææ ‡é¢˜", "content": "åˆ†æå†…å®¹", "task_id": 1}'
```

## ğŸ“‚ ç›®å½•ç»“æ„

```
chatgpthelper/
â”œâ”€â”€ main.py                 # â­ Pythonåç«¯æœåŠ¡
â”œâ”€â”€ manifest.json           # Chromeæ‰©å±•é…ç½®
â”œâ”€â”€ background.js           # æ’ä»¶åå°ï¼ˆå®šæ—¶è°ƒåº¦ï¼‰
â”œâ”€â”€ content-script.js       # é¡µé¢æ“ä½œï¼ˆDOMäº¤äº’ã€å‘é€promptï¼‰
â”œâ”€â”€ popup.html/js           # æ’ä»¶æ§åˆ¶ç•Œé¢
â”œâ”€â”€ popup-ui.js             # UIæ¸²æŸ“æ¨¡å—
â”œâ”€â”€ popup-storage.js        # å­˜å‚¨ç®¡ç†æ¨¡å—
â”œâ”€â”€ prompts.json            # æé—®é…ç½®ï¼ˆé¢„ç•™ï¼‰
â”œâ”€â”€ start_server.sh         # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop_server.sh          # åœæ­¢è„šæœ¬
â”œâ”€â”€ chatgpt_helper.log      # æœåŠ¡æ—¥å¿—
â””â”€â”€ requirements.txt        # Pythonä¾èµ–
```

## ğŸ”§ é…ç½®è¯´æ˜

### å®šæ—¶ä»»åŠ¡æ—¶é—´ç‚¹
æ¯å¤©æ‰§è¡Œ6æ¬¡ï¼š**4ç‚¹ã€8ç‚¹ã€12ç‚¹ã€16ç‚¹ã€20ç‚¹ã€24ç‚¹**

### æ‰§è¡Œé€»è¾‘
1. ä» `/get-tasks` è·å–å¾…åˆ†æä»»åŠ¡
2. è‹¥æ— ä»»åŠ¡åˆ™è·³è¿‡æœ¬æ¬¡æ‰§è¡Œ
3. æ‰“å¼€/æ¿€æ´» ChatGPT æ ‡ç­¾é¡µ
4. é€ä¸ªæ‰§è¡Œä»»åŠ¡ï¼ˆç‚¹å‡»æ–°å¯¹è¯ â†’ å¡«å…¥prompt â†’ å‘é€ â†’ ç­‰å¾…å“åº”ï¼‰
5. ä¿å­˜ç»“æœåˆ°åç«¯ï¼ˆåŒå†™MySQLå’ŒSQLiteï¼‰

### task_id ä¼ é€’
- æ’ä»¶æ‰§è¡Œä»»åŠ¡æ—¶æºå¸¦ `task_id`
- åç«¯ä¿å­˜æ—¶æ ¹æ® `task_id` æ›´æ–°æœ¬åœ°æ•°æ®åº“çŠ¶æ€

## ğŸ—„ï¸ æ•°æ®åº“è¯´æ˜

### è¯»å–çš„è¡¨
| è¡¨å | æ•°æ®åº“ | æ¡ä»¶ |
|------|--------|------|
| `analysis_task` | SQLite | is_analyzed=0 |

### å†™å…¥çš„è¡¨
| è¡¨å | æ•°æ®åº“ | è¯´æ˜ |
|------|--------|------|
| `analysis_task` | SQLite | æ›´æ–° is_analyzed=1, ai_result |
| `news_red_telegraph` | MySQL | æ–°å¢è®°å½• |
| `news_process_tracking` | MySQL | æ–°å¢è·Ÿè¸ªè®°å½• |

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¾èµ–å…³ç³»**: å¿…é¡»å…ˆæœ‰BBGNewsäº§ç”Ÿçš„ `analysis_task` æ•°æ®æ‰èƒ½æ‰§è¡Œåˆ†æ
2. **ChatGPTç™»å½•**: ç¡®ä¿Chromeå·²ç™»å½•ChatGPTè´¦å·
3. **é¡µé¢å…ƒç´ **: Content Scriptä¸­æŒ‰é’®å®šä½ä½¿ç”¨ `data-testid` å±æ€§
4. **ç«¯å£å ç”¨**: ç¡®ä¿1126ç«¯å£å¯ç”¨
5. **å¯åŠ¨é¡ºåº**: å…ˆåˆå§‹åŒ–æ•°æ®åº“ â†’ å¯åŠ¨æœ¬æœåŠ¡ â†’ å®‰è£…æ’ä»¶ â†’ ç™»å½•ChatGPT

## ğŸ› æ•…éšœæ’æŸ¥

### æ²¡æœ‰ä»»åŠ¡å¯æ‰§è¡Œ
- æ£€æŸ¥BBGNewsæ˜¯å¦æ­£å¸¸è¿è¡Œå¹¶äº§ç”Ÿä»»åŠ¡
- æŸ¥è¯¢æ•°æ®åº“ï¼š`SELECT COUNT(*) FROM analysis_task WHERE is_analyzed = 0;`

### Content Script æœªå°±ç»ª
- åˆ·æ–°ChatGPTé¡µé¢
- æ£€æŸ¥æ’ä»¶æ˜¯å¦å·²åŠ è½½

### æŸ¥çœ‹æ—¥å¿—
```bash
# Linux/Mac
tail -f chatgpt_helper.log

# Windows
Get-Content chatgpt_helper.log -Wait
```

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:1126/health
```

## ğŸ–¥ï¸ ChatGPT é¡µé¢å…ƒç´ è¯´æ˜

| å…ƒç´  | é€‰æ‹©å™¨ | è¯´æ˜ |
|------|--------|------|
| æ–°å»ºå¯¹è¯æŒ‰é’® | `a[data-testid="create-new-chat-button"]` | åˆ›å»ºæ–°èŠå¤© |
| è¾“å…¥æ¡† | `#prompt-textarea` | æ”¯æŒ contenteditable å’Œ textarea |
| å‘é€æŒ‰é’® | `button[data-testid="send-button"]` æˆ– `#composer-submit-button` | å‘é€æç¤º |
| åŠ©æ‰‹æ¶ˆæ¯ | `[data-message-author-role="assistant"]` | AI å›å¤å†…å®¹ |
| Markdownå†…å®¹ | `.markdown.prose` | æ ¼å¼åŒ–çš„å›å¤ |

## ğŸ“ å®Œæ•´æµæ°´çº¿å¯åŠ¨é¡ºåº

```bash
# 1. åˆå§‹åŒ–æ•°æ®åº“
cd spiderx/db && python init_db.py

# 2. å¯åŠ¨BBGNewsæœåŠ¡ï¼ˆé‡‡é›†ç«¯ï¼‰
cd spiderx/bbgnews && python main.py

# 3. å¯åŠ¨ChatGPTHelperæœåŠ¡ï¼ˆåˆ†æç«¯ï¼‰
cd spiderx/chatgpthelper && python main.py

# 4. å®‰è£…ä¸¤ä¸ªChromeæ’ä»¶
# 5. ç™»å½•Bloombergå’ŒChatGPT
# 6. åœ¨ä¸¤ä¸ªæ’ä»¶çš„popupä¸­å¯åŠ¨å®šæ—¶ä»»åŠ¡
```

## ğŸ†š ä¸ GeminiHelper çš„å¯¹æ¯”

| åŠŸèƒ½ | GeminiHelper | ChatGPTHelper |
|------|--------------|---------------|
| ç›®æ ‡ç½‘ç«™ | gemini.google.com | chatgpt.com |
| ç«¯å£ | 1124 | 1126 |
| æ–°å»ºå¯¹è¯ | `aria-label="å‘èµ·æ–°å¯¹è¯"` | `data-testid="create-new-chat-button"` |
| è¾“å…¥æ¡† | `.ql-editor` | `#prompt-textarea` |
| å‘é€æŒ‰é’® | `aria-label="å‘é€"` | `data-testid="send-button"` |
| å“åº”æ£€æµ‹ | `message-actions` | `data-message-author-role="assistant"` |
